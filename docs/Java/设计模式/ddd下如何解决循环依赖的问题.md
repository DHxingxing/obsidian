

2025-06-28 21:47

在领域驱动设计中,聚合质检只能通过Id（对方数据库主键） 来进行关联，不应该直接操作对方的聚合对象或者服务。

如果直接持有对方的对象可能会出现循环依赖的问题

## 那么如何解决循环依赖问题呢？

- 聚合之间只通过 ID 关联（最重要）
    不要 A 聚合中注入 BService、持有 B 对象
    只存 ID，在需要时从 Repository 或 QueryService 查询

- 把组合逻辑抽到应用服务中协调（ApplicationService）
    应用服务是天然的协调器，可以注入多个 Service，但底层 Service 不互注：

-  查询类依赖抽到组合 QueryService 中
    如果只是组合多个聚合的数据展示，使用专门的查询服务：
