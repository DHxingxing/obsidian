"use strict";(self.webpackChunkmy_wiki=self.webpackChunkmy_wiki||[]).push([[8831],{6451:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>s});const o=JSON.parse('{"id":"Java/Spring/log \u914d\u7f6e\u6587\u4ef6","title":"log \u914d\u7f6e\u6587\u4ef6","description":"\u4fdd\u5b58\u4e3axml \u6587\u4ef6 \u6587\u4ef6\u540d\u5b57 logback-spring.xml","source":"@site/docs/Java/Spring/log \u914d\u7f6e\u6587\u4ef6.md","sourceDirName":"Java/Spring","slug":"/Java/Spring/log \u914d\u7f6e\u6587\u4ef6","permalink":"/obsidian/docs/Java/Spring/log \u914d\u7f6e\u6587\u4ef6","draft":false,"unlisted":false,"editUrl":"https://github.com/DHxingxing/obsidian/edit/main/docs/Java/Spring/log \u914d\u7f6e\u6587\u4ef6.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"@PostConstruct","permalink":"/obsidian/docs/Java/Spring/@PostConstruct"},"next":{"title":"\u591a\u7ebf\u7a0b\u4e0b \u4e0a\u4e0b\u6587\u4fe1\u606f\u4e22\u5931\u95ee\u9898","permalink":"/obsidian/docs/Java/\u5e76\u53d1\u7f16\u7a0b/\u591a\u7ebf\u7a0b\u4e0b \u4e0a\u4e0b\u6587\u4fe1\u606f\u4e22\u5931\u95ee\u9898"}}');var r=l(4848),i=l(8453);const a={},c=void 0,t={},s=[];function g(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>  \n\x3c!-- \u65e5\u5fd7\u7ea7\u522b\u4ece\u4f4e\u5230\u9ad8\u5206\u4e3aTRACE < DEBUG < INFO < WARN < ERROR < FATAL\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3aWARN\uff0c\u5219\u4f4e\u4e8eWARN\u7684\u4fe1\u606f\u90fd\u4e0d\u4f1a\u8f93\u51fa --\x3e  \n\x3c!-- scan:\u5f53\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3atrue\u65f6\uff0c\u914d\u7f6e\u6587\u4ef6\u5982\u679c\u53d1\u751f\u6539\u53d8\uff0c\u5c06\u4f1a\u88ab\u91cd\u65b0\u52a0\u8f7d\uff0c\u9ed8\u8ba4\u503c\u4e3atrue --\x3e  \n\x3c!-- scanPeriod:\u8bbe\u7f6e\u76d1\u6d4b\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6709\u4fee\u6539\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u65f6\u95f4\u5355\u4f4d\uff0c\u9ed8\u8ba4\u5355\u4f4d\u662f\u6beb\u79d2\u3002\u5f53scan\u4e3atrue\u65f6\uff0c\u6b64\u5c5e\u6027\u751f\u6548\u3002\u9ed8\u8ba4\u7684\u65f6\u95f4\u95f4\u9694\u4e3a1\u5206\u949f\u3002 --\x3e  \n\x3c!-- debug:\u5f53\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3atrue\u65f6\uff0c\u5c06\u6253\u5370\u51falogback\u5185\u90e8\u65e5\u5fd7\u4fe1\u606f\uff0c\u5b9e\u65f6\u67e5\u770blogback\u8fd0\u884c\u72b6\u6001\u3002\u9ed8\u8ba4\u503c\u4e3afalse\u3002 --\x3e  \n<configuration scan="true" scanPeriod="10 seconds">  \n  \n    \x3c!--<include resource="org/springframework/boot/logging/logback/base.xml" />--\x3e  \n  \n    <contextName>logback</contextName>  \n    \x3c!-- name\u7684\u503c\u662f\u53d8\u91cf\u7684\u540d\u79f0\uff0cvalue\u7684\u503c\u65f6\u53d8\u91cf\u5b9a\u4e49\u7684\u503c\u3002\u901a\u8fc7\u5b9a\u4e49\u7684\u503c\u4f1a\u88ab\u63d2\u5165\u5230logger\u4e0a\u4e0b\u6587\u4e2d\u3002\u5b9a\u4e49\u53d8\u91cf\u540e\uff0c\u53ef\u4ee5\u4f7f\u201c${}\u201d\u6765\u4f7f\u7528\u53d8\u91cf\u3002 --\x3e  \n    <property name="log.path" value="logs"/>  \n  \n    \x3c!-- \u5f69\u8272\u65e5\u5fd7 --\x3e  \n    \x3c!-- \u5f69\u8272\u65e5\u5fd7\u4f9d\u8d56\u7684\u6e32\u67d3\u7c7b --\x3e  \n    <conversionRule conversionWord="clr" converterClass="org.springframework.boot.logging.logback.ColorConverter"/>  \n    <conversionRule conversionWord="wex"  \n                    converterClass="org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter"/>  \n    <conversionRule conversionWord="wEx"  \n                    converterClass="org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter"/>  \n    \x3c!-- \u5f69\u8272\u65e5\u5fd7\u683c\u5f0f --\x3e  \n    <property name="CONSOLE_LOG_PATTERN"  \n              value="${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}"/>  \n  \n  \n    \x3c!--\u8f93\u51fa\u5230\u63a7\u5236\u53f0--\x3e  \n    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">  \n        \x3c!--\u6b64\u65e5\u5fd7appender\u662f\u4e3a\u5f00\u53d1\u4f7f\u7528\uff0c\u53ea\u914d\u7f6e\u6700\u5e95\u7ea7\u522b\uff0c\u63a7\u5236\u53f0\u8f93\u51fa\u7684\u65e5\u5fd7\u7ea7\u522b\u662f\u5927\u4e8e\u6216\u7b49\u4e8e\u6b64\u7ea7\u522b\u7684\u65e5\u5fd7\u4fe1\u606f--\x3e  \n        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">  \n            <level>info</level>  \n        </filter>  \n        <encoder>  \n            <Pattern>${CONSOLE_LOG_PATTERN}</Pattern>  \n            \x3c!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --\x3e  \n            <charset>UTF-8</charset>  \n        </encoder>  \n    </appender>  \n  \n  \n    \x3c!--\u8f93\u51fa\u5230\u6587\u4ef6--\x3e  \n  \n    \x3c!-- \u65f6\u95f4\u6eda\u52a8\u8f93\u51fa level\u4e3a DEBUG \u65e5\u5fd7 --\x3e  \n    <appender name="DEBUG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">  \n        \x3c!-- \u6b63\u5728\u8bb0\u5f55\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d --\x3e  \n        <file>${log.path}/log_debug.log</file>  \n        \x3c!--\u65e5\u5fd7\u6587\u4ef6\u8f93\u51fa\u683c\u5f0f--\x3e  \n        <encoder>  \n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>  \n            <charset>UTF-8</charset> \x3c!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --\x3e  \n        </encoder>  \n        \x3c!-- \u65e5\u5fd7\u8bb0\u5f55\u5668\u7684\u6eda\u52a8\u7b56\u7565\uff0c\u6309\u65e5\u671f\uff0c\u6309\u5927\u5c0f\u8bb0\u5f55 --\x3e  \n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">  \n            \x3c!-- \u65e5\u5fd7\u5f52\u6863 --\x3e  \n            <fileNamePattern>${log.path}/debug/log-debug-%d{yyyy-MM-dd}.%i.log</fileNamePattern>  \n            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">  \n                <maxFileSize>100MB</maxFileSize>  \n            </timeBasedFileNamingAndTriggeringPolicy>  \n            \x3c!--\u65e5\u5fd7\u6587\u4ef6\u4fdd\u7559\u5929\u6570--\x3e  \n            <maxHistory>365</maxHistory>  \n        </rollingPolicy>  \n        \x3c!-- \u6b64\u65e5\u5fd7\u6587\u4ef6\u53ea\u8bb0\u5f55debug\u7ea7\u522b\u7684 --\x3e  \n        <filter class="ch.qos.logback.classic.filter.LevelFilter">  \n            <level>debug</level>  \n            <onMatch>ACCEPT</onMatch>  \n            <onMismatch>DENY</onMismatch>  \n        </filter>  \n    </appender>  \n  \n    \x3c!-- \u65f6\u95f4\u6eda\u52a8\u8f93\u51fa level\u4e3a INFO \u65e5\u5fd7 --\x3e  \n    <appender name="INFO_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">  \n        \x3c!-- \u6b63\u5728\u8bb0\u5f55\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d --\x3e  \n        <file>${log.path}/log_info.log</file>  \n        \x3c!--\u65e5\u5fd7\u6587\u4ef6\u8f93\u51fa\u683c\u5f0f--\x3e  \n        <encoder>  \n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>  \n            <charset>UTF-8</charset>  \n        </encoder>  \n        \x3c!-- \u65e5\u5fd7\u8bb0\u5f55\u5668\u7684\u6eda\u52a8\u7b56\u7565\uff0c\u6309\u65e5\u671f\uff0c\u6309\u5927\u5c0f\u8bb0\u5f55 --\x3e  \n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">  \n            \x3c!-- \u6bcf\u5929\u65e5\u5fd7\u5f52\u6863\u8def\u5f84\u4ee5\u53ca\u683c\u5f0f --\x3e  \n            <fileNamePattern>${log.path}/info/log-info-%d{yyyy-MM-dd}.%i.log</fileNamePattern>  \n            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">  \n                <maxFileSize>100MB</maxFileSize>  \n            </timeBasedFileNamingAndTriggeringPolicy>  \n            \x3c!--\u65e5\u5fd7\u6587\u4ef6\u4fdd\u7559\u5929\u6570--\x3e  \n            <maxHistory>365</maxHistory>  \n        </rollingPolicy>  \n        \x3c!-- \u6b64\u65e5\u5fd7\u6587\u4ef6\u53ea\u8bb0\u5f55info\u7ea7\u522b\u7684 --\x3e  \n        <filter class="ch.qos.logback.classic.filter.LevelFilter">  \n            <level>info</level>  \n            <onMatch>ACCEPT</onMatch>  \n            <onMismatch>DENY</onMismatch>  \n        </filter>  \n    </appender>  \n  \n    \x3c!-- \u65f6\u95f4\u6eda\u52a8\u8f93\u51fa level\u4e3a WARN \u65e5\u5fd7 --\x3e  \n    <appender name="WARN_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">  \n        \x3c!-- \u6b63\u5728\u8bb0\u5f55\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d --\x3e  \n        <file>${log.path}/log_warn.log</file>  \n        \x3c!--\u65e5\u5fd7\u6587\u4ef6\u8f93\u51fa\u683c\u5f0f--\x3e  \n        <encoder>  \n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>  \n            <charset>UTF-8</charset> \x3c!-- \u6b64\u5904\u8bbe\u7f6e\u5b57\u7b26\u96c6 --\x3e  \n        </encoder>  \n        \x3c!-- \u65e5\u5fd7\u8bb0\u5f55\u5668\u7684\u6eda\u52a8\u7b56\u7565\uff0c\u6309\u65e5\u671f\uff0c\u6309\u5927\u5c0f\u8bb0\u5f55 --\x3e  \n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">  \n            <fileNamePattern>${log.path}/warn/log-warn-%d{yyyy-MM-dd}.%i.log</fileNamePattern>  \n            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">  \n                <maxFileSize>100MB</maxFileSize>  \n            </timeBasedFileNamingAndTriggeringPolicy>  \n            \x3c!--\u65e5\u5fd7\u6587\u4ef6\u4fdd\u7559\u5929\u6570--\x3e  \n            <maxHistory>365</maxHistory>  \n        </rollingPolicy>  \n        \x3c!-- \u6b64\u65e5\u5fd7\u6587\u4ef6\u53ea\u8bb0\u5f55warn\u7ea7\u522b\u7684 --\x3e  \n        <filter class="ch.qos.logback.classic.filter.LevelFilter">  \n            <level>warn</level>  \n            <onMatch>ACCEPT</onMatch>  \n            <onMismatch>DENY</onMismatch>  \n        </filter>  \n    </appender>  \n  \n  \n    \x3c!-- \u65f6\u95f4\u6eda\u52a8\u8f93\u51fa level\u4e3a ERROR \u65e5\u5fd7 --\x3e  \n    <appender name="ERROR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">  \n        \x3c!-- \u6b63\u5728\u8bb0\u5f55\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d --\x3e  \n        <file>${log.path}/log_error.log</file>  \n        \x3c!--\u65e5\u5fd7\u6587\u4ef6\u8f93\u51fa\u683c\u5f0f--\x3e  \n        <encoder>  \n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>  \n            <charset>UTF-8</charset> \x3c!-- \u6b64\u5904\u8bbe\u7f6e\u5b57\u7b26\u96c6 --\x3e  \n        </encoder>  \n        \x3c!-- \u65e5\u5fd7\u8bb0\u5f55\u5668\u7684\u6eda\u52a8\u7b56\u7565\uff0c\u6309\u65e5\u671f\uff0c\u6309\u5927\u5c0f\u8bb0\u5f55 --\x3e  \n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">  \n            <fileNamePattern>${log.path}/error/log-error-%d{yyyy-MM-dd}.%i.log</fileNamePattern>  \n            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">  \n                <maxFileSize>100MB</maxFileSize>  \n            </timeBasedFileNamingAndTriggeringPolicy>  \n            \x3c!--\u65e5\u5fd7\u6587\u4ef6\u4fdd\u7559\u5929\u6570--\x3e  \n            <maxHistory>365</maxHistory>  \n        </rollingPolicy>  \n        \x3c!-- \u6b64\u65e5\u5fd7\u6587\u4ef6\u53ea\u8bb0\u5f55ERROR\u7ea7\u522b\u7684 --\x3e  \n        <filter class="ch.qos.logback.classic.filter.LevelFilter">  \n            <level>ERROR</level>  \n            <onMatch>ACCEPT</onMatch>  \n            <onMismatch>DENY</onMismatch>  \n        </filter>  \n    </appender>  \n  \n    \x3c!--  \n        <logger>\u7528\u6765\u8bbe\u7f6e\u67d0\u4e00\u4e2a\u5305\u6216\u8005\u5177\u4f53\u7684\u67d0\u4e00\u4e2a\u7c7b\u7684\u65e5\u5fd7\u6253\u5370\u7ea7\u522b\u3001  \n        \u4ee5\u53ca\u6307\u5b9a<appender>\u3002<logger>\u4ec5\u6709\u4e00\u4e2aname\u5c5e\u6027\uff0c  \n        \u4e00\u4e2a\u53ef\u9009\u7684level\u548c\u4e00\u4e2a\u53ef\u9009\u7684addtivity\u5c5e\u6027\u3002  \n        name:\u7528\u6765\u6307\u5b9a\u53d7\u6b64logger\u7ea6\u675f\u7684\u67d0\u4e00\u4e2a\u5305\u6216\u8005\u5177\u4f53\u7684\u67d0\u4e00\u4e2a\u7c7b\u3002  \n        level:\u7528\u6765\u8bbe\u7f6e\u6253\u5370\u7ea7\u522b\uff0c\u5927\u5c0f\u5199\u65e0\u5173\uff1aTRACE, DEBUG, INFO, WARN, ERROR, ALL \u548c OFF\uff0c  \n              \u8fd8\u6709\u4e00\u4e2a\u7279\u4fd7\u503cINHERITED\u6216\u8005\u540c\u4e49\u8bcdNULL\uff0c\u4ee3\u8868\u5f3a\u5236\u6267\u884c\u4e0a\u7ea7\u7684\u7ea7\u522b\u3002  \n              \u5982\u679c\u672a\u8bbe\u7f6e\u6b64\u5c5e\u6027\uff0c\u90a3\u4e48\u5f53\u524dlogger\u5c06\u4f1a\u7ee7\u627f\u4e0a\u7ea7\u7684\u7ea7\u522b\u3002  \n        addtivity:\u662f\u5426\u5411\u4e0a\u7ea7logger\u4f20\u9012\u6253\u5370\u4fe1\u606f\u3002\u9ed8\u8ba4\u662ftrue\u3002  \n    --\x3e  \n    \x3c!--<logger name="org.springframework.web" level="info"/>--\x3e    \x3c!--<logger name="org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor" level="INFO"/>--\x3e    \x3c!--        \u4f7f\u7528mybatis\u7684\u65f6\u5019\uff0csql\u8bed\u53e5\u662fdebug\u4e0b\u624d\u4f1a\u6253\u5370\uff0c\u800c\u8fd9\u91cc\u6211\u4eec\u53ea\u914d\u7f6e\u4e86info\uff0c\u6240\u4ee5\u60f3\u8981\u67e5\u770bsql\u8bed\u53e5\u7684\u8bdd\uff0c\u6709\u4ee5\u4e0b\u4e24\u79cd\u64cd\u4f5c\uff1a  \n        \u7b2c\u4e00\u79cd\u628a<root level="info">\u6539\u6210<root level="DEBUG">\u8fd9\u6837\u5c31\u4f1a\u6253\u5370sql\uff0c\u4e0d\u8fc7\u8fd9\u6837\u65e5\u5fd7\u90a3\u8fb9\u4f1a\u51fa\u73b0\u5f88\u591a\u5176\u4ed6\u6d88\u606f  \n        \u7b2c\u4e8c\u79cd\u5c31\u662f\u5355\u72ec\u7ed9dao\u4e0b\u76ee\u5f55\u914d\u7f6edebug\u6a21\u5f0f\uff0c\u4ee3\u7801\u5982\u4e0b\uff0c\u8fd9\u6837\u914d\u7f6esql\u8bed\u53e5\u4f1a\u6253\u5370\uff0c\u5176\u4ed6\u8fd8\u662f\u6b63\u5e38info\u7ea7\u522b\uff1a  \n     --\x3e  \n  \n  \n    \x3c!--        root\u8282\u70b9\u662f\u5fc5\u9009\u8282\u70b9\uff0c\u7528\u6765\u6307\u5b9a\u6700\u57fa\u7840\u7684\u65e5\u5fd7\u8f93\u51fa\u7ea7\u522b\uff0c\u53ea\u6709\u4e00\u4e2alevel\u5c5e\u6027  \n        level:\u7528\u6765\u8bbe\u7f6e\u6253\u5370\u7ea7\u522b\uff0c\u5927\u5c0f\u5199\u65e0\u5173\uff1aTRACE, DEBUG, INFO, WARN, ERROR, ALL \u548c OFF\uff0c  \n        \u4e0d\u80fd\u8bbe\u7f6e\u4e3aINHERITED\u6216\u8005\u540c\u4e49\u8bcdNULL\u3002\u9ed8\u8ba4\u662fDEBUG  \n        \u53ef\u4ee5\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a\u5143\u7d20\uff0c\u6807\u8bc6\u8fd9\u4e2aappender\u5c06\u4f1a\u6dfb\u52a0\u5230\u8fd9\u4e2alogger\u3002  \n    --\x3e  \n  \n    \x3c!--\u5f00\u53d1\u73af\u5883:\u6253\u5370\u63a7\u5236\u53f0--\x3e  \n    <springProfile name="dev">  \n        <logger name="org.apache.hadoop.hdfs.client" level="ERROR"/>  \n    </springProfile>  \n  \n    <root level="debug">  \n        <appender-ref ref="CONSOLE"/>  \n        <appender-ref ref="DEBUG_FILE"/>  \n        <appender-ref ref="INFO_FILE"/>  \n        <appender-ref ref="WARN_FILE"/>  \n        <appender-ref ref="ERROR_FILE"/>  \n    </root>  \n  \n    <springProfile name="pro">  \n        <root level="info">  \n            <appender-ref ref="CONSOLE"/>  \n            <appender-ref ref="DEBUG_FILE"/>  \n            <appender-ref ref="INFO_FILE"/>  \n            <appender-ref ref="ERROR_FILE"/>  \n            <appender-ref ref="WARN_FILE"/>  \n        </root>  \n    </springProfile>  \n  \n</configuration>\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u4fdd\u5b58\u4e3axml \u6587\u4ef6 \u6587\u4ef6\u540d\u5b57 logback-spring.xml"})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>a,x:()=>c});var o=l(6540);const r={},i=o.createContext(r);function a(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);